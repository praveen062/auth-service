	auth-service/docs		coverage: 0.0% of statements
=== RUN   TestMain_LoadConfig_Success
--- PASS: TestMain_LoadConfig_Success (0.00s)
=== RUN   TestMain_LoadConfig_FileNotFound
--- PASS: TestMain_LoadConfig_FileNotFound (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_AllowedIP
--- PASS: TestMain_IPAllowlistMiddleware_AllowedIP (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_BlockedIP
--- PASS: TestMain_IPAllowlistMiddleware_BlockedIP (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_IPv6Allowed
--- PASS: TestMain_IPAllowlistMiddleware_IPv6Allowed (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_EmptyAllowedIPs
--- PASS: TestMain_IPAllowlistMiddleware_EmptyAllowedIPs (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_ProxyHeaders
--- PASS: TestMain_IPAllowlistMiddleware_ProxyHeaders (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_RealIPHeader
--- PASS: TestMain_IPAllowlistMiddleware_RealIPHeader (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_MultipleForwardedIPs
--- PASS: TestMain_IPAllowlistMiddleware_MultipleForwardedIPs (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_InvalidIP
--- PASS: TestMain_IPAllowlistMiddleware_InvalidIP (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_SubnetMatching
--- PASS: TestMain_IPAllowlistMiddleware_SubnetMatching (0.00s)
=== RUN   TestMain_IPAllowlistMiddleware_SubnetBlocked
--- PASS: TestMain_IPAllowlistMiddleware_SubnetBlocked (0.00s)
=== RUN   TestMain_ConfigurationValidation
--- PASS: TestMain_ConfigurationValidation (0.00s)
=== RUN   TestMain_DatabaseDSN_Generation
--- PASS: TestMain_DatabaseDSN_Generation (0.00s)
=== RUN   TestMain_RedisAddr_Generation
--- PASS: TestMain_RedisAddr_Generation (0.00s)
=== RUN   TestMain_EnvironmentVariableOverride
--- PASS: TestMain_EnvironmentVariableOverride (0.00s)
=== RUN   TestIPAllowlistMiddleware_AllowedIP
--- PASS: TestIPAllowlistMiddleware_AllowedIP (0.00s)
=== RUN   TestIPAllowlistMiddleware_AllowedIPWithPort
--- PASS: TestIPAllowlistMiddleware_AllowedIPWithPort (0.00s)
=== RUN   TestIPAllowlistMiddleware_AllowedIPSubnet
--- PASS: TestIPAllowlistMiddleware_AllowedIPSubnet (0.00s)
=== RUN   TestIPAllowlistMiddleware_DisallowedIP
--- PASS: TestIPAllowlistMiddleware_DisallowedIP (0.00s)
=== RUN   TestIPAllowlistMiddleware_EmptyAllowedIPs
--- PASS: TestIPAllowlistMiddleware_EmptyAllowedIPs (0.00s)
=== RUN   TestIPAllowlistMiddleware_NoRemoteAddr
--- PASS: TestIPAllowlistMiddleware_NoRemoteAddr (0.00s)
=== RUN   TestIPAllowlistMiddleware_IPv6Allowed
--- PASS: TestIPAllowlistMiddleware_IPv6Allowed (0.00s)
=== RUN   TestIPAllowlistMiddleware_IPv6Disallowed
--- PASS: TestIPAllowlistMiddleware_IPv6Disallowed (0.00s)
=== RUN   TestIPAllowlistMiddleware_MultipleAllowedIPs
--- PASS: TestIPAllowlistMiddleware_MultipleAllowedIPs (0.00s)
=== RUN   TestIPAllowlistMiddleware_InvalidIPFormat
--- PASS: TestIPAllowlistMiddleware_InvalidIPFormat (0.00s)
=== RUN   TestIPAllowlistMiddleware_EmptyRemoteAddr
--- PASS: TestIPAllowlistMiddleware_EmptyRemoteAddr (0.00s)
=== RUN   TestIPAllowlistMiddleware_Integration
=== RUN   TestIPAllowlistMiddleware_Integration/Allowed_IPv4
=== RUN   TestIPAllowlistMiddleware_Integration/Allowed_IPv4_Subnet
=== RUN   TestIPAllowlistMiddleware_Integration/Allowed_IPv6
=== RUN   TestIPAllowlistMiddleware_Integration/Disallowed_IPv4
=== RUN   TestIPAllowlistMiddleware_Integration/Disallowed_IPv6
=== RUN   TestIPAllowlistMiddleware_Integration/Empty_Remote_Addr
=== RUN   TestIPAllowlistMiddleware_Integration/Invalid_Format
--- PASS: TestIPAllowlistMiddleware_Integration (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Allowed_IPv4 (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Allowed_IPv4_Subnet (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Allowed_IPv6 (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Disallowed_IPv4 (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Disallowed_IPv6 (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Empty_Remote_Addr (0.00s)
    --- PASS: TestIPAllowlistMiddleware_Integration/Invalid_Format (0.00s)
=== RUN   TestMain_ServerSetup
--- PASS: TestMain_ServerSetup (0.00s)
=== RUN   TestMain_ActuatorSetup
--- PASS: TestMain_ActuatorSetup (0.00s)
=== RUN   TestMain_HandlerSetup
--- PASS: TestMain_HandlerSetup (0.00s)
=== RUN   TestMain_SwaggerSetup
--- PASS: TestMain_SwaggerSetup (0.00s)
=== RUN   TestMain_ErrorHandling
--- PASS: TestMain_ErrorHandling (0.00s)
=== RUN   TestMain_AddressGeneration
--- PASS: TestMain_AddressGeneration (0.00s)
=== RUN   TestMain_PrintfStatements
--- PASS: TestMain_PrintfStatements (0.00s)
PASS
coverage: 14.6% of statements
ok  	auth-service/cmd/server	0.782s	coverage: 14.6% of statements
=== RUN   TestNewActuator
--- PASS: TestNewActuator (0.00s)
=== RUN   TestActuator_Info
--- PASS: TestActuator_Info (0.00s)
=== RUN   TestActuator_Health
--- PASS: TestActuator_Health (0.00s)
=== RUN   TestActuator_Liveness
--- PASS: TestActuator_Liveness (0.00s)
=== RUN   TestActuator_Readiness
--- PASS: TestActuator_Readiness (0.00s)
=== RUN   TestActuator_Environment
--- PASS: TestActuator_Environment (0.00s)
=== RUN   TestActuator_Metrics
--- PASS: TestActuator_Metrics (0.00s)
=== RUN   TestActuator_PrometheusMetrics
--- PASS: TestActuator_PrometheusMetrics (0.00s)
=== RUN   TestActuator_Status
--- PASS: TestActuator_Status (0.00s)
=== RUN   TestActuator_Uptime
--- PASS: TestActuator_Uptime (0.00s)
=== RUN   TestActuator_ThreadDump
--- PASS: TestActuator_ThreadDump (0.00s)
=== RUN   TestActuator_HeapDump
--- PASS: TestActuator_HeapDump (0.00s)
=== RUN   TestActuator_Mappings
--- PASS: TestActuator_Mappings (0.00s)
=== RUN   TestActuator_Loggers
--- PASS: TestActuator_Loggers (0.00s)
=== RUN   TestActuator_SetLoggerLevel
--- PASS: TestActuator_SetLoggerLevel (0.00s)
=== RUN   TestActuator_RecordRequest
--- PASS: TestActuator_RecordRequest (0.00s)
=== RUN   TestActuator_StartEndRequest
--- PASS: TestActuator_StartEndRequest (0.00s)
=== RUN   TestActuator_GetMemoryStats
--- PASS: TestActuator_GetMemoryStats (0.00s)
=== RUN   TestActuator_GetRuntimeStats
--- PASS: TestActuator_GetRuntimeStats (0.00s)
=== RUN   TestActuator_GetRequestStats
--- PASS: TestActuator_GetRequestStats (0.00s)
=== RUN   TestActuator_RegisterHealthCheck
--- PASS: TestActuator_RegisterHealthCheck (0.00s)
=== RUN   TestActuator_RegisterReadinessCheck
--- PASS: TestActuator_RegisterReadinessCheck (0.00s)
=== RUN   TestActuator_ConfigProps
--- PASS: TestActuator_ConfigProps (0.00s)
=== RUN   TestActuator_SetLoggerLevel_Success
--- PASS: TestActuator_SetLoggerLevel_Success (0.00s)
=== RUN   TestActuator_SetLoggerLevel_InvalidJSON
--- PASS: TestActuator_SetLoggerLevel_InvalidJSON (0.00s)
=== RUN   TestActuator_SetLoggerLevel_EmptyBody
--- PASS: TestActuator_SetLoggerLevel_EmptyBody (0.00s)
=== RUN   TestActuator_RegisterRoutes_AllEndpoints
--- PASS: TestActuator_RegisterRoutes_AllEndpoints (0.00s)
=== RUN   TestActuator_RecordRequest_WithMetrics
--- PASS: TestActuator_RecordRequest_WithMetrics (0.00s)
=== RUN   TestActuator_AppInfo_WithProperties
--- PASS: TestActuator_AppInfo_WithProperties (0.00s)
=== RUN   TestActuator_NewActuator_WithNilAppInfo
--- PASS: TestActuator_NewActuator_WithNilAppInfo (0.00s)
=== RUN   TestActuator_GetMemoryStats_Detailed
--- PASS: TestActuator_GetMemoryStats_Detailed (0.00s)
=== RUN   TestActuator_GetRuntimeStats_Detailed
--- PASS: TestActuator_GetRuntimeStats_Detailed (0.00s)
=== RUN   TestActuator_GetRequestStats_Detailed
--- PASS: TestActuator_GetRequestStats_Detailed (0.00s)
=== RUN   TestDatabaseHealthCheck_Success
--- PASS: TestDatabaseHealthCheck_Success (0.00s)
=== RUN   TestDatabaseHealthCheck_WithTimeout
--- PASS: TestDatabaseHealthCheck_WithTimeout (0.00s)
=== RUN   TestRedisHealthCheck_Success
--- PASS: TestRedisHealthCheck_Success (0.00s)
=== RUN   TestRedisHealthCheck_WithNilClient
--- PASS: TestRedisHealthCheck_WithNilClient (0.00s)
=== RUN   TestDiskSpaceHealthCheck_Success
--- PASS: TestDiskSpaceHealthCheck_Success (0.00s)
=== RUN   TestDiskSpaceHealthCheck_WithZeroSpace
--- PASS: TestDiskSpaceHealthCheck_WithZeroSpace (0.00s)
=== RUN   TestDiskSpaceHealthCheck_WithNegativeSpace
--- PASS: TestDiskSpaceHealthCheck_WithNegativeSpace (0.00s)
=== RUN   TestMemoryHealthCheck_Success
--- PASS: TestMemoryHealthCheck_Success (0.00s)
=== RUN   TestMemoryHealthCheck_WithLowThreshold
--- PASS: TestMemoryHealthCheck_WithLowThreshold (0.00s)
=== RUN   TestMemoryHealthCheck_WithZeroThreshold
--- PASS: TestMemoryHealthCheck_WithZeroThreshold (0.00s)
=== RUN   TestMemoryHealthCheck_WithNegativeThreshold
--- PASS: TestMemoryHealthCheck_WithNegativeThreshold (0.00s)
=== RUN   TestGoroutineHealthCheck_Success
--- PASS: TestGoroutineHealthCheck_Success (0.00s)
=== RUN   TestGoroutineHealthCheck_WithLowThreshold
--- PASS: TestGoroutineHealthCheck_WithLowThreshold (0.00s)
=== RUN   TestGoroutineHealthCheck_WithZeroThreshold
--- PASS: TestGoroutineHealthCheck_WithZeroThreshold (0.00s)
=== RUN   TestGoroutineHealthCheck_WithNegativeThreshold
--- PASS: TestGoroutineHealthCheck_WithNegativeThreshold (0.00s)
=== RUN   TestCustomHealthCheck_Success
--- PASS: TestCustomHealthCheck_Success (0.00s)
=== RUN   TestCustomHealthCheck_WithError
--- PASS: TestCustomHealthCheck_WithError (0.00s)
=== RUN   TestCustomHealthCheck_WithNilFunction
--- PASS: TestCustomHealthCheck_WithNilFunction (0.00s)
=== RUN   TestTimeoutHealthCheck_Success
--- PASS: TestTimeoutHealthCheck_Success (0.01s)
=== RUN   TestTimeoutHealthCheck_WithError
--- PASS: TestTimeoutHealthCheck_WithError (0.01s)
=== RUN   TestTimeoutHealthCheck_WithTimeout
--- PASS: TestTimeoutHealthCheck_WithTimeout (0.05s)
=== RUN   TestTimeoutHealthCheck_WithZeroTimeout
--- PASS: TestTimeoutHealthCheck_WithZeroTimeout (0.00s)
=== RUN   TestTimeoutHealthCheck_WithNegativeTimeout
--- PASS: TestTimeoutHealthCheck_WithNegativeTimeout (0.00s)
=== RUN   TestTimeoutHealthCheck_WithNilCheck
--- PASS: TestTimeoutHealthCheck_WithNilCheck (0.00s)
=== RUN   TestMemoryHealthCheck_Calculation
--- PASS: TestMemoryHealthCheck_Calculation (0.00s)
=== RUN   TestHealthCheck_Integration
=== RUN   TestHealthCheck_Integration/memory
=== RUN   TestHealthCheck_Integration/goroutines
=== RUN   TestHealthCheck_Integration/disk
=== RUN   TestHealthCheck_Integration/redis
=== RUN   TestHealthCheck_Integration/custom
--- PASS: TestHealthCheck_Integration (0.00s)
    --- PASS: TestHealthCheck_Integration/memory (0.00s)
    --- PASS: TestHealthCheck_Integration/goroutines (0.00s)
    --- PASS: TestHealthCheck_Integration/disk (0.00s)
    --- PASS: TestHealthCheck_Integration/redis (0.00s)
    --- PASS: TestHealthCheck_Integration/custom (0.00s)
PASS
coverage: 96.9% of statements
ok  	auth-service/internal/actuator	1.269s	coverage: 96.9% of statements
=== RUN   TestLoadConfig_Success
--- PASS: TestLoadConfig_Success (0.00s)
=== RUN   TestLoadConfig_FileNotFound
--- PASS: TestLoadConfig_FileNotFound (0.00s)
=== RUN   TestLoadConfig_InvalidYAML
--- PASS: TestLoadConfig_InvalidYAML (0.00s)
=== RUN   TestLoadConfig_WithEnvironmentVariables
--- PASS: TestLoadConfig_WithEnvironmentVariables (0.00s)
=== RUN   TestLoadConfig_DefaultValues
--- PASS: TestLoadConfig_DefaultValues (0.00s)
=== RUN   TestDatabaseConfig_GetDSN
--- PASS: TestDatabaseConfig_GetDSN (0.00s)
=== RUN   TestDatabaseConfig_GetDSN_WithSSL
--- PASS: TestDatabaseConfig_GetDSN_WithSSL (0.00s)
=== RUN   TestRedisConfig_GetRedisAddr
--- PASS: TestRedisConfig_GetRedisAddr (0.00s)
=== RUN   TestRedisConfig_GetRedisAddr_CustomHost
--- PASS: TestRedisConfig_GetRedisAddr_CustomHost (0.00s)
=== RUN   TestConfig_Validation
--- PASS: TestConfig_Validation (0.00s)
=== RUN   TestConfig_CompleteConfiguration
--- PASS: TestConfig_CompleteConfiguration (0.00s)
=== RUN   TestLoadConfig_WithAllEnvironmentVariables
--- PASS: TestLoadConfig_WithAllEnvironmentVariables (0.00s)
=== RUN   TestLoadConfig_WithInvalidEnvironmentVariables
--- PASS: TestLoadConfig_WithInvalidEnvironmentVariables (0.00s)
=== RUN   TestLoadConfig_WithZeroEnvironmentVariables
--- PASS: TestLoadConfig_WithZeroEnvironmentVariables (0.00s)
=== RUN   TestDatabaseConfig_GetDSN_WithAllFields
--- PASS: TestDatabaseConfig_GetDSN_WithAllFields (0.00s)
=== RUN   TestRedisConfig_GetRedisAddr_WithPassword
--- PASS: TestRedisConfig_GetRedisAddr_WithPassword (0.00s)
=== RUN   TestRedisConfig_GetRedisAddr_WithCustomPort
--- PASS: TestRedisConfig_GetRedisAddr_WithCustomPort (0.00s)
=== RUN   TestConfig_DefaultValues_Comprehensive
--- PASS: TestConfig_DefaultValues_Comprehensive (0.00s)
PASS
coverage: 90.2% of statements
ok  	auth-service/internal/config	0.446s	coverage: 90.2% of statements
=== RUN   TestAuthHandler_Login_Success
--- PASS: TestAuthHandler_Login_Success (0.00s)
=== RUN   TestAuthHandler_Login_InvalidEmail
--- PASS: TestAuthHandler_Login_InvalidEmail (0.00s)
=== RUN   TestAuthHandler_Login_MissingFields
--- PASS: TestAuthHandler_Login_MissingFields (0.00s)
=== RUN   TestAuthHandler_Register_Success
--- PASS: TestAuthHandler_Register_Success (0.00s)
=== RUN   TestAuthHandler_Register_InvalidEmail
--- PASS: TestAuthHandler_Register_InvalidEmail (0.00s)
=== RUN   TestAuthHandler_Register_MissingFields
--- PASS: TestAuthHandler_Register_MissingFields (0.00s)
=== RUN   TestAuthHandler_RefreshToken_Success
--- PASS: TestAuthHandler_RefreshToken_Success (0.00s)
=== RUN   TestAuthHandler_RefreshToken_MissingToken
--- PASS: TestAuthHandler_RefreshToken_MissingToken (0.00s)
=== RUN   TestAuthHandler_Logout_Success
--- PASS: TestAuthHandler_Logout_Success (0.00s)
=== RUN   TestAuthHandler_Login_InvalidJSON
--- PASS: TestAuthHandler_Login_InvalidJSON (0.00s)
=== RUN   TestAuthHandler_Register_EmptyPassword
--- PASS: TestAuthHandler_Register_EmptyPassword (0.00s)
=== RUN   TestAuthHandler_NewAuthHandler
--- PASS: TestAuthHandler_NewAuthHandler (0.00s)
=== RUN   TestOAuthHandler_GoogleLogin_Success
--- PASS: TestOAuthHandler_GoogleLogin_Success (0.00s)
=== RUN   TestOAuthHandler_GoogleLogin_WithCustomRedirectURI
--- PASS: TestOAuthHandler_GoogleLogin_WithCustomRedirectURI (0.00s)
=== RUN   TestOAuthHandler_GoogleLogin_MissingTenantID
--- PASS: TestOAuthHandler_GoogleLogin_MissingTenantID (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_Success
--- PASS: TestOAuthHandler_GoogleCallback_Success (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_MissingCode
--- PASS: TestOAuthHandler_GoogleCallback_MissingCode (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_OAuthError
--- PASS: TestOAuthHandler_GoogleCallback_OAuthError (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_Success
--- PASS: TestOAuthHandler_ClientCredentials_Success (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_UnsupportedGrantType
--- PASS: TestOAuthHandler_ClientCredentials_UnsupportedGrantType (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_InvalidJSON
--- PASS: TestOAuthHandler_ClientCredentials_InvalidJSON (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_Success
--- PASS: TestOAuthHandler_CreateOneTimeToken_Success (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_MissingURL
--- PASS: TestOAuthHandler_CreateOneTimeToken_MissingURL (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_Success
--- PASS: TestOAuthHandler_VerifyOneTimeToken_Success (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_MissingToken
--- PASS: TestOAuthHandler_VerifyOneTimeToken_MissingToken (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_InvalidToken
--- PASS: TestOAuthHandler_VerifyOneTimeToken_InvalidToken (0.00s)
=== RUN   TestOAuthHandler_RefreshSession_Success
--- PASS: TestOAuthHandler_RefreshSession_Success (0.00s)
=== RUN   TestOAuthHandler_RefreshSession_MissingSessionID
--- PASS: TestOAuthHandler_RefreshSession_MissingSessionID (0.00s)
=== RUN   TestOAuthHandler_NewOAuthHandler
--- PASS: TestOAuthHandler_NewOAuthHandler (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_WithAllFields
--- PASS: TestOAuthHandler_CreateOneTimeToken_WithAllFields (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_WithDefaultValues
--- PASS: TestOAuthHandler_CreateOneTimeToken_WithDefaultValues (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_WithInvalidJSON
--- PASS: TestOAuthHandler_CreateOneTimeToken_WithInvalidJSON (0.00s)
=== RUN   TestOAuthHandler_CreateOneTimeToken_WithEmptyBody
--- PASS: TestOAuthHandler_CreateOneTimeToken_WithEmptyBody (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_WithAllFields
--- PASS: TestOAuthHandler_VerifyOneTimeToken_WithAllFields (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_WithMissingSessionID
--- PASS: TestOAuthHandler_VerifyOneTimeToken_WithMissingSessionID (0.00s)
=== RUN   TestOAuthHandler_VerifyOneTimeToken_WithInvalidToken
--- PASS: TestOAuthHandler_VerifyOneTimeToken_WithInvalidToken (0.00s)
=== RUN   TestOAuthHandler_RefreshSession_WithAllFields
--- PASS: TestOAuthHandler_RefreshSession_WithAllFields (0.00s)
=== RUN   TestOAuthHandler_RefreshSession_WithInvalidJSON
--- PASS: TestOAuthHandler_RefreshSession_WithInvalidJSON (0.00s)
=== RUN   TestOAuthHandler_RefreshSession_WithEmptyBody
--- PASS: TestOAuthHandler_RefreshSession_WithEmptyBody (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_WithScope
--- PASS: TestOAuthHandler_ClientCredentials_WithScope (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_WithoutScope
--- PASS: TestOAuthHandler_ClientCredentials_WithoutScope (0.00s)
=== RUN   TestOAuthHandler_ClientCredentials_WithEmptyScope
--- PASS: TestOAuthHandler_ClientCredentials_WithEmptyScope (0.00s)
=== RUN   TestOAuthHandler_GoogleLogin_WithEmptyRedirectURI
--- PASS: TestOAuthHandler_GoogleLogin_WithEmptyRedirectURI (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_WithEmptyState
--- PASS: TestOAuthHandler_GoogleCallback_WithEmptyState (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_WithOnlyCode
--- PASS: TestOAuthHandler_GoogleCallback_WithOnlyCode (0.00s)
=== RUN   TestOAuthHandler_GoogleCallback_WithOnlyError
--- PASS: TestOAuthHandler_GoogleCallback_WithOnlyError (0.00s)
=== RUN   TestOAuthHandler_Integration
=== RUN   TestOAuthHandler_Integration/GoogleLogin
=== RUN   TestOAuthHandler_Integration/GoogleCallback
=== RUN   TestOAuthHandler_Integration/ClientCredentials
=== RUN   TestOAuthHandler_Integration/CreateOneTimeToken
=== RUN   TestOAuthHandler_Integration/VerifyOneTimeToken
=== RUN   TestOAuthHandler_Integration/RefreshSession
--- PASS: TestOAuthHandler_Integration (0.00s)
    --- PASS: TestOAuthHandler_Integration/GoogleLogin (0.00s)
    --- PASS: TestOAuthHandler_Integration/GoogleCallback (0.00s)
    --- PASS: TestOAuthHandler_Integration/ClientCredentials (0.00s)
    --- PASS: TestOAuthHandler_Integration/CreateOneTimeToken (0.00s)
    --- PASS: TestOAuthHandler_Integration/VerifyOneTimeToken (0.00s)
    --- PASS: TestOAuthHandler_Integration/RefreshSession (0.00s)
PASS
coverage: 94.4% of statements
ok  	auth-service/internal/handler/rest	0.958s	coverage: 94.4% of statements
=== RUN   TestActuatorMiddleware
--- PASS: TestActuatorMiddleware (0.00s)
=== RUN   TestHealthCheckMiddleware
--- PASS: TestHealthCheckMiddleware (0.00s)
=== RUN   TestRBACMiddleware_UserHasPermission_Success
    rbac_middleware_test.go:89: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_UserHasPermission_Success (0.00s)
=== RUN   TestRBACMiddleware_UserDoesNotHavePermission
    rbac_middleware_test.go:126: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_UserDoesNotHavePermission (0.00s)
=== RUN   TestRBACMiddleware_MissingUserID
--- PASS: TestRBACMiddleware_MissingUserID (0.00s)
=== RUN   TestRBACMiddleware_MissingTenantID
--- PASS: TestRBACMiddleware_MissingTenantID (0.00s)
=== RUN   TestRBACMiddleware_RBACServiceError
    rbac_middleware_test.go:225: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_RBACServiceError (0.00s)
=== RUN   TestRBACMiddleware_DifferentPermissions
    rbac_middleware_test.go:274: PASS:	UserHasPermission(string,string,string,string)
    rbac_middleware_test.go:274: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_DifferentPermissions (0.00s)
=== RUN   TestRBACMiddleware_DifferentUsers
    rbac_middleware_test.go:322: PASS:	UserHasPermission(string,string,string,string)
    rbac_middleware_test.go:322: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_DifferentUsers (0.00s)
=== RUN   TestRBACMiddleware_DifferentTenants
    rbac_middleware_test.go:370: PASS:	UserHasPermission(string,string,string,string)
    rbac_middleware_test.go:370: PASS:	UserHasPermission(string,string,string,string)
--- PASS: TestRBACMiddleware_DifferentTenants (0.00s)
PASS
coverage: 100.0% of statements
ok  	auth-service/internal/middleware	0.268s	coverage: 100.0% of statements
=== RUN   TestRole_Structure
--- PASS: TestRole_Structure (0.00s)
=== RUN   TestRole_DefaultRole
--- PASS: TestRole_DefaultRole (0.00s)
=== RUN   TestPermission_Structure
--- PASS: TestPermission_Structure (0.00s)
=== RUN   TestRolePermission_Structure
--- PASS: TestRolePermission_Structure (0.00s)
=== RUN   TestUserRole_Structure
--- PASS: TestUserRole_Structure (0.00s)
=== RUN   TestServiceRole_Structure
--- PASS: TestServiceRole_Structure (0.00s)
=== RUN   TestRole_EmptyFields
--- PASS: TestRole_EmptyFields (0.00s)
=== RUN   TestPermission_EmptyFields
--- PASS: TestPermission_EmptyFields (0.00s)
=== RUN   TestRolePermission_EmptyFields
--- PASS: TestRolePermission_EmptyFields (0.00s)
=== RUN   TestUserRole_EmptyFields
--- PASS: TestUserRole_EmptyFields (0.00s)
=== RUN   TestServiceRole_EmptyFields
--- PASS: TestServiceRole_EmptyFields (0.00s)
=== RUN   TestRole_ComplexName
--- PASS: TestRole_ComplexName (0.00s)
=== RUN   TestPermission_ComplexName
--- PASS: TestPermission_ComplexName (0.00s)
=== RUN   TestRole_WithSpecialCharacters
--- PASS: TestRole_WithSpecialCharacters (0.00s)
=== RUN   TestPermission_WithSpecialCharacters
--- PASS: TestPermission_WithSpecialCharacters (0.00s)
=== RUN   TestRolePermission_WithSpecialCharacters
--- PASS: TestRolePermission_WithSpecialCharacters (0.00s)
=== RUN   TestUserRole_WithSpecialCharacters
--- PASS: TestUserRole_WithSpecialCharacters (0.00s)
=== RUN   TestServiceRole_WithSpecialCharacters
--- PASS: TestServiceRole_WithSpecialCharacters (0.00s)
=== RUN   TestRole_Validation
=== RUN   TestRole_Validation/Valid_role
=== RUN   TestRole_Validation/Empty_ID
=== RUN   TestRole_Validation/Empty_TenantID
=== RUN   TestRole_Validation/Empty_Name
--- PASS: TestRole_Validation (0.00s)
    --- PASS: TestRole_Validation/Valid_role (0.00s)
    --- PASS: TestRole_Validation/Empty_ID (0.00s)
    --- PASS: TestRole_Validation/Empty_TenantID (0.00s)
    --- PASS: TestRole_Validation/Empty_Name (0.00s)
=== RUN   TestPermission_Validation
=== RUN   TestPermission_Validation/Valid_permission
=== RUN   TestPermission_Validation/Empty_ID
=== RUN   TestPermission_Validation/Empty_Name
--- PASS: TestPermission_Validation (0.00s)
    --- PASS: TestPermission_Validation/Valid_permission (0.00s)
    --- PASS: TestPermission_Validation/Empty_ID (0.00s)
    --- PASS: TestPermission_Validation/Empty_Name (0.00s)
=== RUN   TestRolePermission_Validation
=== RUN   TestRolePermission_Validation/Valid_role_permission
=== RUN   TestRolePermission_Validation/Empty_RoleID
=== RUN   TestRolePermission_Validation/Empty_PermissionID
--- PASS: TestRolePermission_Validation (0.00s)
    --- PASS: TestRolePermission_Validation/Valid_role_permission (0.00s)
    --- PASS: TestRolePermission_Validation/Empty_RoleID (0.00s)
    --- PASS: TestRolePermission_Validation/Empty_PermissionID (0.00s)
=== RUN   TestUserRole_Validation
=== RUN   TestUserRole_Validation/Valid_user_role
=== RUN   TestUserRole_Validation/Empty_UserID
=== RUN   TestUserRole_Validation/Empty_RoleID
=== RUN   TestUserRole_Validation/Empty_TenantID
--- PASS: TestUserRole_Validation (0.00s)
    --- PASS: TestUserRole_Validation/Valid_user_role (0.00s)
    --- PASS: TestUserRole_Validation/Empty_UserID (0.00s)
    --- PASS: TestUserRole_Validation/Empty_RoleID (0.00s)
    --- PASS: TestUserRole_Validation/Empty_TenantID (0.00s)
=== RUN   TestServiceRole_Validation
=== RUN   TestServiceRole_Validation/Valid_service_role
=== RUN   TestServiceRole_Validation/Empty_ServiceID
=== RUN   TestServiceRole_Validation/Empty_RoleID
=== RUN   TestServiceRole_Validation/Empty_TenantID
--- PASS: TestServiceRole_Validation (0.00s)
    --- PASS: TestServiceRole_Validation/Valid_service_role (0.00s)
    --- PASS: TestServiceRole_Validation/Empty_ServiceID (0.00s)
    --- PASS: TestServiceRole_Validation/Empty_RoleID (0.00s)
    --- PASS: TestServiceRole_Validation/Empty_TenantID (0.00s)
PASS
coverage: [no statements]
ok  	auth-service/internal/models	1.371s	coverage: [no statements]
=== RUN   TestRBACService_AssignRoleToUser_Success
    rbac_service_test.go:65: PASS:	AssignRoleToUser(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_AssignRoleToUser_Success (0.00s)
=== RUN   TestRBACService_AssignRoleToUser_Error
    rbac_service_test.go:81: PASS:	AssignRoleToUser(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_AssignRoleToUser_Error (0.00s)
=== RUN   TestRBACService_AssignRoleToService_Success
    rbac_service_test.go:97: PASS:	AssignRoleToService(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_AssignRoleToService_Success (0.00s)
=== RUN   TestRBACService_AssignRoleToService_Error
    rbac_service_test.go:113: PASS:	AssignRoleToService(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_AssignRoleToService_Error (0.00s)
=== RUN   TestRBACService_AssignPermissionToRole_Success
    rbac_service_test.go:129: PASS:	AssignPermissionToRole(context.backgroundCtx,string,string)
--- PASS: TestRBACService_AssignPermissionToRole_Success (0.00s)
=== RUN   TestRBACService_AssignPermissionToRole_Error
    rbac_service_test.go:145: PASS:	AssignPermissionToRole(context.backgroundCtx,string,string)
--- PASS: TestRBACService_AssignPermissionToRole_Error (0.00s)
=== RUN   TestRBACService_UserHasPermission_Success
    rbac_service_test.go:162: PASS:	UserHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_UserHasPermission_Success (0.00s)
=== RUN   TestRBACService_UserHasPermission_NoPermission
    rbac_service_test.go:179: PASS:	UserHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_UserHasPermission_NoPermission (0.00s)
=== RUN   TestRBACService_UserHasPermission_Error
    rbac_service_test.go:196: PASS:	UserHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_UserHasPermission_Error (0.00s)
=== RUN   TestRBACService_ServiceHasPermission_Success
    rbac_service_test.go:213: PASS:	ServiceHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_ServiceHasPermission_Success (0.00s)
=== RUN   TestRBACService_ServiceHasPermission_NoPermission
    rbac_service_test.go:230: PASS:	ServiceHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_ServiceHasPermission_NoPermission (0.00s)
=== RUN   TestRBACService_ServiceHasPermission_Error
    rbac_service_test.go:247: PASS:	ServiceHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_ServiceHasPermission_Error (0.00s)
=== RUN   TestRBACService_GetUserRoles_Success
    rbac_service_test.go:274: PASS:	GetUserRoles(context.backgroundCtx,string,string)
--- PASS: TestRBACService_GetUserRoles_Success (0.00s)
=== RUN   TestRBACService_GetUserRoles_Error
    rbac_service_test.go:291: PASS:	GetUserRoles(context.backgroundCtx,string,string)
--- PASS: TestRBACService_GetUserRoles_Error (0.00s)
=== RUN   TestRBACService_GetRolePermissions_Success
    rbac_service_test.go:320: PASS:	GetRolePermissions(context.backgroundCtx,string)
--- PASS: TestRBACService_GetRolePermissions_Success (0.00s)
=== RUN   TestRBACService_GetRolePermissions_Error
    rbac_service_test.go:337: PASS:	GetRolePermissions(context.backgroundCtx,string)
--- PASS: TestRBACService_GetRolePermissions_Error (0.00s)
=== RUN   TestRBACService_Integration_UserRoleAssignment
    rbac_service_test.go:375: PASS:	AssignRoleToUser(context.backgroundCtx,string,string,string)
    rbac_service_test.go:375: PASS:	AssignPermissionToRole(context.backgroundCtx,string,string)
    rbac_service_test.go:375: PASS:	UserHasPermission(context.backgroundCtx,string,string,string)
    rbac_service_test.go:375: PASS:	GetUserRoles(context.backgroundCtx,string,string)
--- PASS: TestRBACService_Integration_UserRoleAssignment (0.00s)
=== RUN   TestRBACService_Integration_ServiceRoleAssignment
    rbac_service_test.go:401: PASS:	AssignRoleToService(context.backgroundCtx,string,string,string)
    rbac_service_test.go:401: PASS:	AssignPermissionToRole(context.backgroundCtx,string,string)
    rbac_service_test.go:401: PASS:	ServiceHasPermission(context.backgroundCtx,string,string,string)
--- PASS: TestRBACService_Integration_ServiceRoleAssignment (0.00s)
PASS
coverage: [no statements]
ok  	auth-service/internal/service	1.548s	coverage: [no statements]
